body{margin:0;color:#d7e7ff;font-family:system-ui,-apple-system,"PingFang SC","Microsoft YaHei",Arial;background:#000}
.bg{position:fixed;inset:0;z-index:-3;overflow:hidden}
.bg-video{position:absolute;inset:-10%;width:120%;height:120%;object-fit:cover;filter:saturate(1.25) contrast(1.1) brightness(0.55)}
.bg-overlay{position:absolute;inset:0;background:radial-gradient(circle at 20% 10%,rgba(26,8,74,.55) 0%,rgba(5,1,15,.75) 45%,rgba(0,0,0,.92) 100%)}
.app{max-width:1200px;margin:0 auto;padding:18px}
.hidden{display:none !important}
.menu{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 36px)}
.shell{display:block}
.card{border-radius:16px;border:1px solid rgba(120,200,255,.25);background:rgba(6,8,20,.68);padding:16px;box-shadow:0 0 26px rgba(0,255,255,.08);width:min(720px,100%)}
.logo{font-weight:900;letter-spacing:2px;font-size:22px;text-shadow:0 0 14px rgba(0,255,255,.35)}
.accent{color:#ff4fd8;text-shadow:0 0 14px rgba(255,79,216,.5)}
.sub{opacity:.9;margin-top:8px;line-height:1.5}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:12px}
select{background:rgba(0,0,0,.45);color:#d7e7ff;border:1px solid rgba(120,200,255,.25);border-radius:10px;padding:8px 10px;outline:none}
button{background:linear-gradient(90deg,rgba(0,255,255,.22),rgba(255,79,216,.18));color:#d7e7ff;border:1px solid rgba(120,200,255,.25);border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:800}
button.ghost{background:rgba(0,0,0,.25)}
.top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.title{font-weight:900;letter-spacing:1px}
.main{display:grid;grid-template-columns:1fr;gap:16px}
.panel{display:grid;grid-template-columns:1fr 340px;gap:16px}
.left{border-radius:16px;border:1px solid rgba(120,200,255,.22);background:rgba(6,8,20,.55);padding:14px}
.right{display:flex;flex-direction:column;gap:14px}
#boardCanvas,#breakoutCanvas{width:100%;height:auto;border-radius:14px;background:radial-gradient(circle at 50% 35%,rgba(0,255,255,.08),rgba(255,79,216,.05),rgba(0,0,0,.35));display:block}
.hint{margin-top:10px;font-size:13px;opacity:.85}
.pill{padding:8px 10px;border-radius:999px;border:1px dashed rgba(120,200,255,.25);background:rgba(0,0,0,.25);font-size:13px}
.status{margin-top:12px;padding:10px;border-radius:12px;background:rgba(0,0,0,.28);border:1px solid rgba(255,255,255,.06);min-height:52px;line-height:1.4}
.tip{margin-top:10px;font-size:12px;opacity:.8}
@media (max-width:980px){.panel{grid-template-columns:1fr}}

/* ===== 修复：背景视频不遮挡界面（永远在底层且不拦截点击） ===== */
.bg-video {
  position: fixed;          /* 固定在窗口背景 */
  inset: 0;                 /* 覆盖整个屏幕 */
  width: 100%;
  height: 100%;
  object-fit: cover;        /* 填满 */
  opacity: 0.18;            /* 更淡一点，避免喧宾夺主 */
  filter: blur(0.6px) saturate(1.15);
  z-index: -10;             /* 关键：放到所有内容下面 */
  pointer-events: none;     /* 关键：不拦截鼠标/触控 */
}

/* 主容器强制在背景之上 */
.app { position: relative; z-index: 1; }

/* ===== 终极分层：视频(0) -> 氛围遮罩(1) -> UI(2) ===== */
.bg-video{
  position: fixed !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  z-index: 0 !important;              /* ✅ 视频在最底层 */
  opacity: 0.38 !important;           /* ✅ 视频更明显一点 */
  pointer-events: none !important;    /* ✅ 不挡点击 */
  filter: saturate(1.25) contrast(1.05) !important;
}

/* ✅ 用遮罩取代“body不透明背景”，否则视频会被盖掉 */
body{
  background: transparent !important; /* ✅ 让视频能透出来 */
}

/* 氛围遮罩：让画面更赛博但不盖死视频 */
body::before{
  content: "" !important;
  position: fixed !important;
  inset: 0 !important;
  z-index: 1 !important;              /* ✅ 在视频上面 */
  pointer-events: none !important;
  background: radial-gradient(circle at 20% 10%,
              rgba(26, 8, 74, 0.28) 0%,
              rgba(5, 1, 15, 0.45) 45%,
              rgba(0, 0, 0, 0.55) 100%) !important;
}

/* 你的UI整体抬到最上层 */
.app{
  position: relative !important;
  z-index: 2 !important;              /* ✅ 在遮罩上面 */
}

/* ===== 关键：把“开始界面那块巨大的面板”变小、变透、变立体 ===== */
/* 你 menu.js 里用的是 .menu，所以这里直接改 .menu */
.menu{
  width: min(860px, 92vw) !important;         /* ✅ 不要占满屏 */
  min-height: 0 !important;                    /* ✅ 去掉可能的固定高度 */
  height: auto !important;                     /* ✅ 自适应内容高度 */
  margin: 18vh auto 0 auto !important;         /* ✅ 往下放一点，露出视频 */
  padding: 22px 24px !important;
  background: rgba(6, 8, 20, 0.22) !important; /* ✅ 更透明，让视频透出来 */
  backdrop-filter: blur(10px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.2) !important;
  border: 1px solid rgba(120,200,255,.22) !important;
  border-radius: 18px !important;
  box-shadow: 0 0 28px rgba(0,255,255,.06) !important;

  /* ✅ “不在一个平面”的感觉：轻微透视/倾斜 */
  transform: perspective(1200px) rotateX(1.2deg) rotateY(-1.2deg) translateZ(0) !important;
}

/* 如果按钮区域被挤得太紧，稍微拉开 */
.menu button{
  margin-right: 10px !important;
}

/* ===== 一屏棋盘：让五子棋盘不需要滚动 ===== */
.board-zone, .gomoku-zone, #gomokuRoot {              /* 兼容不同页面结构 */
  max-height: calc(100vh - 140px) !important;         /* 预留顶部标题/按钮空间 */
  overflow: hidden !important;                         /* 避免出现滚动条 */
}

/* 棋盘 canvas：优先按屏幕短边缩放，并限制最大尺寸 */
#boardCanvas, #gomokuCanvas {
  width: min(76vmin, 640px) !important;               /* ✅ 关键：一屏可见（76vmin）且不超过 640px */
  height: auto !important;                             /* 高度随宽度缩放 */
  aspect-ratio: 1 / 1 !important;                      /* 保持正方形 */
  display: block !important;
  margin: 0 auto !important;
}

/* 让棋盘卡片别太“肥” */
.board-zone {
  padding: 10px !important;
}

/* 右侧面板略窄一点（如果你是左右布局），避免把棋盘挤出屏幕 */
.main {
  grid-template-columns: 1fr 320px !important;
}
